<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VERIDEX ‚Äî Deepfake Detection System</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@300;400;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  /* ‚îÄ‚îÄ DARK THEME (default) ‚îÄ‚îÄ */
  [data-theme="dark"] {
    --bg: #030810;
    --panel: #080f1e;
    --border: #0d2040;
    --accent: #00e5ff;
    --accent2: #ff003c;
    --accent3: #39ff14;
    --warn: #ffb700;
    --text: #b8d4f0;
    --muted: #3a5475;
    --header-bg: rgba(3,8,16,0.95);
    --scanline: rgba(0,0,0,0.08);
    --grid-color: rgba(0,229,255,0.03);
    --upload-bg: rgba(0,229,255,0.01);
    --upload-hover: rgba(0,229,255,0.04);
    --log-bg: #030810;
    --shadow: 0 4px 24px rgba(0,0,0,0.5);
  }

  /* ‚îÄ‚îÄ LIGHT THEME ‚îÄ‚îÄ */
  [data-theme="light"] {
    --bg: #f0f4ff;
    --panel: #ffffff;
    --border: #d0ddf0;
    --accent: #0077aa;
    --accent2: #cc0030;
    --accent3: #1a9900;
    --warn: #cc8800;
    --text: #1a2a4a;
    --muted: #7a99bb;
    --header-bg: rgba(240,244,255,0.95);
    --scanline: rgba(0,0,0,0);
    --grid-color: rgba(0,119,170,0.04);
    --upload-bg: rgba(0,119,170,0.02);
    --upload-hover: rgba(0,119,170,0.06);
    --log-bg: #f8faff;
    --shadow: 0 4px 24px rgba(0,50,120,0.1);
    --glow: 0 0 12px rgba(0,119,170,0.2);
    --glow2: 0 0 12px rgba(204,0,48,0.2);
  }

  [data-theme="light"] body::before { display: none; }
  [data-theme="light"] .logo-mark { text-shadow: none; }
  [data-theme="light"] .panel::before { opacity: 0.3; }
  [data-theme="light"] body { background-image: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(0,100,200,0.06) 0%, transparent 60%); }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Rajdhani', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
    transition: background 0.3s, color 0.3s;
  }

  body::before {
    content: '';
    position: fixed; inset: 0;
    background: repeating-linear-gradient(0deg, transparent, transparent 2px, var(--scanline) 2px, var(--scanline) 4px);
    pointer-events: none; z-index: 9999;
  }

  body::after {
    content: '';
    position: fixed; inset: 0;
    background-image: linear-gradient(var(--grid-color) 1px, transparent 1px), linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none; z-index: 0;
  }

  .container { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; padding: 0 24px 60px; }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 20px 0 16px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 32px;
    flex-wrap: wrap; gap: 12px;
  }

  .logo { display: flex; align-items: baseline; gap: 10px; flex-wrap: wrap; }

  .logo-mark {
    font-family: 'Orbitron', monospace; font-size: clamp(20px, 5vw, 28px); font-weight: 900;
    color: var(--accent); text-shadow: 0 0 30px rgba(0,229,255,0.6); letter-spacing: 4px;
    animation: glitch 8s infinite;
  }

  @keyframes glitch {
    0%,95%,100% { text-shadow: 0 0 30px rgba(0,229,255,0.6); }
    96% { text-shadow: -2px 0 rgba(255,0,60,0.8), 2px 0 rgba(0,229,255,0.8); }
    97% { text-shadow: 2px 0 rgba(255,0,60,0.8), -2px 0 rgba(0,229,255,0.8); }
  }

  [data-theme="light"] .logo-mark { animation: none; }

  .logo-sub { font-family: 'Share Tech Mono', monospace; font-size: 10px; color: var(--muted); letter-spacing: 3px; }

  .header-controls { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }

  /* LANGUAGE SELECTOR */
  .lang-select {
    background: var(--panel); border: 1px solid var(--border); color: var(--text);
    font-family: 'Share Tech Mono', monospace; font-size: 10px; letter-spacing: 1px;
    padding: 6px 10px; cursor: pointer; outline: none; transition: all 0.2s;
  }
  .lang-select:hover { border-color: var(--accent); }

  /* THEME TOGGLE */
  .theme-toggle {
    display: flex; align-items: center; gap: 8px;
    background: var(--panel); border: 1px solid var(--border);
    padding: 6px 12px; cursor: pointer; transition: all 0.2s;
    font-family: 'Share Tech Mono', monospace; font-size: 10px; color: var(--text);
  }
  .theme-toggle:hover { border-color: var(--accent); color: var(--accent); }

  .toggle-track {
    width: 32px; height: 16px; background: var(--border); border-radius: 8px;
    position: relative; transition: background 0.3s;
  }
  [data-theme="light"] .toggle-track { background: var(--accent); }

  .toggle-thumb {
    position: absolute; top: 2px; left: 2px;
    width: 12px; height: 12px; border-radius: 50%;
    background: var(--muted); transition: all 0.3s;
  }
  [data-theme="light"] .toggle-thumb { left: 18px; background: #fff; }

  .status-bar { display: flex; align-items: center; gap: 12px; }
  .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent3); box-shadow: 0 0 10px var(--accent3); animation: pulse 2s infinite; }
  @keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }
  .status-text { font-family: 'Share Tech Mono', monospace; font-size: 11px; color: var(--accent3); letter-spacing: 2px; }

  /* ‚îÄ‚îÄ MAIN GRID ‚îÄ‚îÄ */
  .main-grid { display: grid; grid-template-columns: 1fr 340px; gap: 20px; }

  /* ‚îÄ‚îÄ PANELS ‚îÄ‚îÄ */
  .panel {
    background: var(--panel); border: 1px solid var(--border);
    position: relative; overflow: hidden;
    box-shadow: var(--shadow); transition: background 0.3s, border 0.3s;
  }
  .panel::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
    background: linear-gradient(90deg, transparent, var(--accent), transparent); opacity: 0.5;
  }
  .panel-header { display: flex; align-items: center; gap: 10px; padding: 12px 16px; border-bottom: 1px solid var(--border); }
  .panel-title { font-family: 'Orbitron', monospace; font-size: 10px; font-weight: 700; letter-spacing: 3px; color: var(--accent); text-transform: uppercase; }
  .panel-icon { width: 6px; height: 6px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 8px var(--accent); }

  /* ‚îÄ‚îÄ UPLOAD ‚îÄ‚îÄ */
  .upload-zone {
    margin: 20px; border: 1px dashed var(--muted); padding: 40px 20px;
    text-align: center; cursor: pointer; transition: all 0.3s; position: relative;
    background: var(--upload-bg);
  }
  .upload-zone:hover, .upload-zone.dragover {
    border-color: var(--accent); background: var(--upload-hover);
    box-shadow: inset 0 0 40px rgba(0,229,255,0.05), 0 0 20px rgba(0,229,255,0.1);
  }
  .upload-zone::after { content: ''; position: absolute; inset: 8px; border: 1px dashed rgba(0,229,255,0.08); pointer-events: none; }
  .upload-icon { width: 56px; height: 56px; margin: 0 auto 16px; }
  .upload-icon svg { width: 56px; height: 56px; stroke: var(--accent); opacity: 0.7; filter: drop-shadow(0 0 8px rgba(0,229,255,0.4)); }
  .upload-title { font-family: 'Orbitron', monospace; font-size: 13px; font-weight: 700; color: var(--accent); letter-spacing: 2px; margin-bottom: 6px; }
  .upload-sub { font-family: 'Share Tech Mono', monospace; font-size: 11px; color: var(--muted); letter-spacing: 1px; margin-bottom: 20px; }

  .tab-row { display: flex; gap: 1px; margin: 0 20px; border-bottom: 1px solid var(--border); }
  .tab { padding: 9px 20px; font-family: 'Orbitron', monospace; font-size: 9px; letter-spacing: 2px; color: var(--muted); cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
  .tab.active { color: var(--accent); border-bottom-color: var(--accent); }

  /* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
  .btn {
    display: inline-flex; align-items: center; gap: 8px; padding: 10px 22px;
    background: transparent; border: 1px solid var(--accent); color: var(--accent);
    font-family: 'Orbitron', monospace; font-size: 9px; font-weight: 700; letter-spacing: 2px;
    cursor: pointer; transition: all 0.2s; text-transform: uppercase; position: relative; overflow: hidden;
  }
  .btn::before { content: ''; position: absolute; inset: 0; background: var(--accent); opacity: 0; transition: opacity 0.2s; }
  .btn:hover::before { opacity: 0.1; }
  .btn:hover { box-shadow: 0 0 20px rgba(0,229,255,0.3); }
  .btn.danger { border-color: var(--accent2); color: var(--accent2); }
  .btn.danger:hover { box-shadow: 0 0 20px rgba(255,0,60,0.3); }
  .btn.danger::before { background: var(--accent2); }
  .btn.share-btn { border-color: var(--warn); color: var(--warn); }
  .btn.share-btn:hover { box-shadow: 0 0 20px rgba(255,183,0,0.3); }
  .btn.share-btn::before { background: var(--warn); }

  /* ‚îÄ‚îÄ PREVIEW ‚îÄ‚îÄ */
  .preview-area { margin: 20px; display: none; }
  .preview-area.active { display: block; }
  .preview-frame {
    border: 1px solid var(--border); background: #000; aspect-ratio: 16/9;
    display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; margin-bottom: 14px;
  }
  .preview-frame img, .preview-frame video { max-width: 100%; max-height: 100%; object-fit: contain; }
  .scan-overlay { position: absolute; inset: 0; pointer-events: none; display: none; }
  .scan-overlay.active { display: block; }
  .scan-line-anim { position: absolute; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent); box-shadow: 0 0 10px var(--accent); animation: scandown 2s linear infinite; }
  @keyframes scandown { 0% { top: 0%; } 100% { top: 100%; } }
  .corner { position: absolute; width: 16px; height: 16px; }
  .corner.tl { top: 8px; left: 8px; border-top: 2px solid var(--accent); border-left: 2px solid var(--accent); }
  .corner.tr { top: 8px; right: 8px; border-top: 2px solid var(--accent); border-right: 2px solid var(--accent); }
  .corner.bl { bottom: 8px; left: 8px; border-bottom: 2px solid var(--accent); border-left: 2px solid var(--accent); }
  .corner.br { bottom: 8px; right: 8px; border-bottom: 2px solid var(--accent); border-right: 2px solid var(--accent); }

  .action-row { display: flex; gap: 10px; flex-wrap: wrap; }

  /* ‚îÄ‚îÄ ANALYZING ‚îÄ‚îÄ */
  .analyzing-state { display: none; text-align: center; padding: 36px 20px; }
  .analyzing-state.active { display: block; }
  .analyze-spinner { width: 56px; height: 56px; margin: 0 auto 16px; border: 2px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin 1s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }
  .analyze-text { font-family: 'Share Tech Mono', monospace; font-size: 11px; color: var(--accent); letter-spacing: 3px; }
  .analyze-sub { font-family: 'Share Tech Mono', monospace; font-size: 9px; color: var(--muted); letter-spacing: 2px; margin-top: 8px; }

  /* ‚îÄ‚îÄ RESULTS ‚îÄ‚îÄ */
  .results-section { margin: 20px; display: none; }
  .results-section.active { display: block; }

  .verdict-box { padding: 20px; border: 1px solid var(--border); margin-bottom: 16px; position: relative; text-align: center; background: rgba(0,0,0,0.1); }
  .verdict-box.real { border-color: var(--accent3); box-shadow: 0 0 30px rgba(57,255,20,0.1); }
  .verdict-box.fake { border-color: var(--accent2); box-shadow: 0 0 30px rgba(255,0,60,0.15); }
  .verdict-label { font-family: 'Share Tech Mono', monospace; font-size: 10px; letter-spacing: 4px; color: var(--muted); margin-bottom: 6px; }
  .verdict-text { font-family: 'Orbitron', monospace; font-size: clamp(22px, 5vw, 32px); font-weight: 900; letter-spacing: 4px; }
  .verdict-text.real { color: var(--accent3); text-shadow: 0 0 20px rgba(57,255,20,0.5); }
  .verdict-text.fake { color: var(--accent2); text-shadow: 0 0 20px rgba(255,0,60,0.5); }

  .confidence-block { margin-bottom: 16px; }
  .conf-label-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
  .conf-label { font-family: 'Share Tech Mono', monospace; font-size: 10px; letter-spacing: 2px; color: var(--muted); }
  .conf-pct { font-family: 'Orbitron', monospace; font-size: 12px; font-weight: 700; }
  .conf-pct.high { color: var(--accent2); }
  .conf-bar { height: 5px; background: var(--border); overflow: hidden; }
  .conf-fill { height: 100%; transition: width 1.5s cubic-bezier(0.16,1,0.3,1); }
  .conf-fill.fake-fill { background: linear-gradient(90deg, #ff003c, #ff6b8a); box-shadow: 0 0 10px rgba(255,0,60,0.5); }
  .conf-fill.real-fill { background: linear-gradient(90deg, #39ff14, #7fff5f); box-shadow: 0 0 10px rgba(57,255,20,0.5); }

  .metrics-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1px; background: var(--border); margin-bottom: 16px; }
  .metric-cell { background: var(--panel); padding: 12px 14px; }
  .metric-name { font-family: 'Share Tech Mono', monospace; font-size: 9px; letter-spacing: 2px; color: var(--muted); margin-bottom: 3px; }
  .metric-value { font-family: 'Orbitron', monospace; font-size: 11px; font-weight: 700; color: var(--text); }
  .metric-value.flag { color: var(--warn); }
  .metric-value.safe { color: var(--accent3); }
  .metric-value.danger { color: var(--accent2); }

  /* ‚îÄ‚îÄ SHARE MODAL ‚îÄ‚îÄ */
  .modal-overlay {
    display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7);
    z-index: 10000; align-items: center; justify-content: center; padding: 20px;
  }
  .modal-overlay.active { display: flex; }
  .modal {
    background: var(--panel); border: 1px solid var(--accent); max-width: 480px; width: 100%;
    padding: 28px; position: relative; box-shadow: 0 0 40px rgba(0,229,255,0.2);
    animation: modalIn 0.3s ease;
  }
  @keyframes modalIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
  .modal-title { font-family: 'Orbitron', monospace; font-size: 13px; font-weight: 700; color: var(--accent); letter-spacing: 3px; margin-bottom: 20px; }
  .modal-close { position: absolute; top: 16px; right: 16px; background: none; border: none; color: var(--muted); font-size: 20px; cursor: pointer; line-height: 1; }
  .modal-close:hover { color: var(--accent2); }

  .share-result-card {
    background: var(--bg); border: 1px solid var(--border); padding: 16px; margin-bottom: 16px;
  }
  .share-result-row { display: flex; justify-content: space-between; margin-bottom: 8px; }
  .share-result-label { font-family: 'Share Tech Mono', monospace; font-size: 10px; color: var(--muted); }
  .share-result-val { font-family: 'Orbitron', monospace; font-size: 11px; font-weight: 700; color: var(--text); }

  .share-buttons { display: flex; gap: 10px; flex-wrap: wrap; }

  .copy-link-row { display: flex; gap: 8px; margin-bottom: 16px; }
  .copy-input {
    flex: 1; background: var(--bg); border: 1px solid var(--border); color: var(--text);
    font-family: 'Share Tech Mono', monospace; font-size: 10px; padding: 8px 12px; outline: none;
  }

  /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
  .sidebar { display: flex; flex-direction: column; gap: 20px; }

  .threat-meter-panel { padding: 16px 20px; }
  .threat-label { font-family: 'Share Tech Mono', monospace; font-size: 10px; color: var(--muted); letter-spacing: 2px; margin-bottom: 12px; }
  .radial-container { display: flex; justify-content: center; margin-bottom: 12px; }
  .radial-svg { width: 110px; height: 110px; transform: rotate(-90deg); }
  .radial-bg { fill: none; stroke: var(--border); stroke-width: 8; }
  .radial-fill { fill: none; stroke-width: 8; stroke-linecap: butt; transition: stroke-dashoffset 1.5s cubic-bezier(0.16,1,0.3,1), stroke 0.5s; }
  .radial-wrap { position: relative; width: 110px; height: 110px; }
  .radial-text { font-family: 'Orbitron', monospace; font-size: 20px; font-weight: 900; color: var(--accent); text-align: center; }
  .radial-sub { font-family: 'Share Tech Mono', monospace; font-size: 8px; color: var(--muted); letter-spacing: 2px; text-align: center; }

  .model-badges { padding: 12px 16px; display: flex; flex-direction: column; gap: 7px; }
  .model-badge { display: flex; align-items: center; justify-content: space-between; padding: 7px 10px; background: var(--upload-bg); border: 1px solid var(--border); border-left: 2px solid var(--accent); }
  .model-name { font-family: 'Share Tech Mono', monospace; font-size: 10px; color: var(--text); }
  .model-score { font-family: 'Orbitron', monospace; font-size: 11px; font-weight: 700; color: var(--accent2); }
  .model-score.safe { color: var(--accent3); }

  .stat-row { display: flex; align-items: center; justify-content: space-between; padding: 10px 16px; border-bottom: 1px solid var(--border); }
  .stat-label { font-family: 'Share Tech Mono', monospace; font-size: 10px; color: var(--muted); }
  .stat-val { font-family: 'Orbitron', monospace; font-size: 13px; font-weight: 700; color: var(--accent); }

  .log-list { padding: 10px; max-height: 180px; overflow-y: auto; background: var(--log-bg); }
  .log-list::-webkit-scrollbar { width: 3px; }
  .log-list::-webkit-scrollbar-thumb { background: var(--muted); }
  .log-entry { display: flex; gap: 8px; padding: 5px 6px; border-bottom: 1px solid rgba(13,32,64,0.3); animation: fadeIn 0.3s ease; }
  @keyframes fadeIn { from { opacity: 0; transform: translateX(-4px); } to { opacity: 1; transform: none; } }
  .log-time { font-family: 'Share Tech Mono', monospace; font-size: 9px; color: var(--muted); white-space: nowrap; padding-top: 1px; }
  .log-msg { font-family: 'Share Tech Mono', monospace; font-size: 10px; line-height: 1.5; }
  .log-msg.ok { color: var(--accent3); }
  .log-msg.warn { color: var(--warn); }
  .log-msg.err { color: var(--accent2); }
  .log-msg.info { color: var(--accent); }

  /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
  footer { margin-top: 36px; padding-top: 16px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
  .footer-text { font-family: 'Share Tech Mono', monospace; font-size: 9px; color: var(--muted); letter-spacing: 2px; }
  .tech-tags { display: flex; gap: 6px; flex-wrap: wrap; }
  .tech-tag { font-family: 'Share Tech Mono', monospace; font-size: 9px; color: var(--muted); letter-spacing: 1px; padding: 3px 7px; border: 1px solid var(--border); }

  #fileInput { display: none; }

  /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
  .toast {
    position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(60px);
    background: var(--panel); border: 1px solid var(--accent); color: var(--accent);
    font-family: 'Share Tech Mono', monospace; font-size: 11px; letter-spacing: 2px;
    padding: 12px 24px; z-index: 99999; transition: transform 0.3s; pointer-events: none;
    box-shadow: 0 0 20px rgba(0,229,255,0.2);
  }
  .toast.show { transform: translateX(-50%) translateY(0); }

  /* ‚îÄ‚îÄ MOBILE RESPONSIVE ‚îÄ‚îÄ */
  @media (max-width: 860px) {
    .main-grid { grid-template-columns: 1fr; }
    .sidebar { flex-direction: row; flex-wrap: wrap; }
    .sidebar .panel { flex: 1; min-width: 260px; }
    header { flex-direction: column; align-items: flex-start; }
    .header-controls { width: 100%; justify-content: space-between; }
  }

  @media (max-width: 560px) {
    .container { padding: 0 14px 40px; }
    .logo-mark { font-size: 22px; }
    .tab { padding: 8px 14px; font-size: 8px; }
    .action-row { flex-direction: column; }
    .btn { justify-content: center; }
    .metrics-grid { grid-template-columns: 1fr; }
    .share-buttons { flex-direction: column; }
    .sidebar { flex-direction: column; }
    .sidebar .panel { min-width: unset; }
    .version { display: none; }
    .tech-tags { display: none; }
  }
</style>
</head>
<body>
<div class="container">

  <header>
    <div class="logo">
      <div class="logo-mark">VERIDEX</div>
      <div class="logo-sub" data-i18n="subtitle">Neural Authenticity Engine v3.7</div>
    </div>
    <div class="header-controls">
      <div class="status-bar">
        <div class="status-dot"></div>
        <div class="status-text" data-i18n="online">SYSTEM ONLINE</div>
      </div>

      <!-- LANGUAGE -->
      <select class="lang-select" onchange="setLanguage(this.value)" id="langSelect">
        <option value="en">üåê English</option>
        <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
        <option value="te">üáÆüá≥ ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
        <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
        <option value="fr">üá´üá∑ Fran√ßais</option>
        <option value="es">üá™üá∏ Espa√±ol</option>
      </select>

      <!-- THEME TOGGLE -->
      <div class="theme-toggle" onclick="toggleTheme()">
        <span id="themeIcon">üåô</span>
        <div class="toggle-track"><div class="toggle-thumb"></div></div>
        <span id="themeLabel" data-i18n="dark_mode">DARK</span>
      </div>
    </div>
  </header>

  <div class="main-grid">
    <div style="display:flex;flex-direction:column;gap:20px;">

      <!-- UPLOAD PANEL -->
      <div class="panel" id="uploadPanel">
        <div class="panel-header">
          <div class="panel-icon"></div>
          <div class="panel-title" data-i18n="media_input">Media Input</div>
        </div>
        <div class="tab-row">
          <div class="tab active" onclick="switchTab(this,'image')" data-i18n="tab_image">IMAGE</div>
          <div class="tab" onclick="switchTab(this,'video')" data-i18n="tab_video">VIDEO</div>
          <div class="tab" onclick="switchTab(this,'batch')" data-i18n="tab_batch">BATCH</div>
        </div>

        <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()">
          <div class="upload-icon">
            <svg viewBox="0 0 64 64" fill="none" stroke-width="1.5">
              <rect x="4" y="12" width="56" height="40" rx="2"/>
              <circle cx="20" cy="28" r="6"/>
              <path d="M4 40 L20 26 L34 36 L44 26 L60 40"/>
              <path d="M32 4 L32 12 M28 8 L32 4 L36 8"/>
            </svg>
          </div>
          <div class="upload-title" data-i18n="drop_media">DROP MEDIA FILE</div>
          <div class="upload-sub" data-i18n="file_types">PNG ¬∑ JPG ¬∑ MP4 ¬∑ MOV ¬∑ AVI ¬∑ MAX 500MB</div>
          <button class="btn" onclick="event.stopPropagation();document.getElementById('fileInput').click()">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/></svg>
            <span data-i18n="select_file">SELECT FILE</span>
          </button>
        </div>
        <input type="file" id="fileInput" accept="image/*,video/*" onchange="handleFile(this)">

        <div class="preview-area" id="previewArea">
          <div class="preview-frame">
            <img id="previewImg" src="" alt="" style="display:none;">
            <video id="previewVid" controls style="display:none;max-width:100%;"></video>
            <div class="scan-overlay" id="scanOverlay">
              <div class="scan-line-anim"></div>
              <div class="corner tl"></div><div class="corner tr"></div>
              <div class="corner bl"></div><div class="corner br"></div>
            </div>
          </div>
          <div class="action-row">
            <button class="btn" onclick="startAnalysis()">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
              <span data-i18n="run_analysis">RUN ANALYSIS</span>
            </button>
            <button class="btn danger" onclick="resetAll()">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 109-9M3 3v6h6"/></svg>
              <span data-i18n="reset">RESET</span>
            </button>
          </div>
        </div>

        <div class="analyzing-state" id="analyzingState">
          <div class="analyze-spinner"></div>
          <div class="analyze-text" id="analyzeStep" data-i18n="initializing">INITIALIZING MODELS</div>
          <div class="analyze-sub" id="analyzeProgress">Xception ¬∑ EfficientNet ¬∑ Frequency Analysis</div>
        </div>
      </div>

      <!-- RESULTS PANEL -->
      <div class="panel" id="resultsPanel">
        <div class="panel-header">
          <div class="panel-icon" style="background:var(--accent2);"></div>
          <div class="panel-title" data-i18n="analysis_results">Analysis Results</div>
        </div>

        <div class="results-section" id="resultsSection">
          <div class="verdict-box" id="verdictBox">
            <div class="verdict-label" data-i18n="classification">CLASSIFICATION VERDICT</div>
            <div class="verdict-text" id="verdictText">‚Äî</div>
          </div>

          <div style="padding:0 20px 16px;">
            <div class="confidence-block">
              <div class="conf-label-row">
                <div class="conf-label" data-i18n="deepfake_prob">DEEPFAKE PROBABILITY</div>
                <div class="conf-pct high" id="fakePct">0%</div>
              </div>
              <div class="conf-bar"><div class="conf-fill fake-fill" id="fakeFill" style="width:0%;"></div></div>
            </div>
            <div class="confidence-block">
              <div class="conf-label-row">
                <div class="conf-label" data-i18n="auth_score">AUTHENTICITY SCORE</div>
                <div class="conf-pct" id="realPct" style="color:var(--accent3);">0%</div>
              </div>
              <div class="conf-bar"><div class="conf-fill real-fill" id="realFill" style="width:0%;"></div></div>
            </div>
          </div>

          <div class="metrics-grid" id="metricsGrid">
            <div class="metric-cell"><div class="metric-name" data-i18n="m_face">Facial Consistency</div><div class="metric-value" id="m1">‚Äî</div></div>
            <div class="metric-cell"><div class="metric-name" data-i18n="m_freq">Frequency Artifacts</div><div class="metric-value" id="m2">‚Äî</div></div>
            <div class="metric-cell"><div class="metric-name" data-i18n="m_blink">Eye Blink Pattern</div><div class="metric-value" id="m3">‚Äî</div></div>
            <div class="metric-cell"><div class="metric-name" data-i18n="m_gan">GAN Fingerprint</div><div class="metric-value" id="m4">‚Äî</div></div>
            <div class="metric-cell"><div class="metric-name" data-i18n="m_skin">Skin Texture</div><div class="metric-value" id="m5">‚Äî</div></div>
            <div class="metric-cell"><div class="metric-name" data-i18n="m_noise">Compression Noise</div><div class="metric-value" id="m6">‚Äî</div></div>
          </div>

          <!-- SHARE BUTTON -->
          <div style="padding:0 20px 20px;">
            <button class="btn share-btn" onclick="openShareModal()" style="width:100%;justify-content:center;">
              <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
              <span data-i18n="share_result">SHARE RESULT</span>
            </button>
          </div>
        </div>

        <div style="padding:36px;text-align:center;color:var(--muted);" id="resultsEmpty">
          <div style="font-family:'Share Tech Mono';font-size:10px;letter-spacing:3px;" data-i18n="awaiting">AWAITING INPUT</div>
        </div>
      </div>

    </div>

    <!-- SIDEBAR -->
    <div class="sidebar">

      <!-- THREAT LEVEL -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-icon" style="background:var(--warn);"></div>
          <div class="panel-title" data-i18n="threat_index">Threat Index</div>
        </div>
        <div class="threat-meter-panel">
          <div class="threat-label" data-i18n="risk_assessment">OVERALL RISK ASSESSMENT</div>
          <div class="radial-container">
            <div class="radial-wrap">
              <svg class="radial-svg" viewBox="0 0 120 120">
                <circle class="radial-bg" cx="60" cy="60" r="50"/>
                <circle class="radial-fill" id="radialFill" cx="60" cy="60" r="50" stroke="#00e5ff" stroke-dasharray="314" stroke-dashoffset="314"/>
              </svg>
              <div style="position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;">
                <div class="radial-text" id="threatPct">‚Äî</div>
                <div class="radial-sub" data-i18n="threat">THREAT</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- MODEL SCORES -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-icon"></div>
          <div class="panel-title" data-i18n="model_ensemble">Model Ensemble</div>
        </div>
        <div class="model-badges">
          <div class="model-badge"><div class="model-name">XCEPTION</div><div class="model-score" id="s1">‚Äî</div></div>
          <div class="model-badge"><div class="model-name">EFFICIENTNET-B7</div><div class="model-score" id="s2">‚Äî</div></div>
          <div class="model-badge"><div class="model-name">FREQ. ANALYZER</div><div class="model-score" id="s3">‚Äî</div></div>
          <div class="model-badge"><div class="model-name">FACE-FORENSICS++</div><div class="model-score" id="s4">‚Äî</div></div>
        </div>
      </div>

      <!-- SESSION STATS -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-icon" style="background:var(--accent3);"></div>
          <div class="panel-title" data-i18n="session_stats">Session Stats</div>
        </div>
        <div class="stat-row"><div class="stat-label" data-i18n="total_scanned">TOTAL SCANNED</div><div class="stat-val" id="totalScanned">0</div></div>
        <div class="stat-row"><div class="stat-label" data-i18n="deepfakes_found">DEEPFAKES FOUND</div><div class="stat-val" style="color:var(--accent2);" id="deepfakesFound">0</div></div>
        <div class="stat-row"><div class="stat-label" data-i18n="authentic">AUTHENTIC</div><div class="stat-val" style="color:var(--accent3);" id="authenticFound">0</div></div>
        <div class="stat-row"><div class="stat-label" data-i18n="avg_conf">AVG CONFIDENCE</div><div class="stat-val" id="avgConf">‚Äî</div></div>
      </div>

      <!-- LOG -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-icon" style="background:var(--muted);"></div>
          <div class="panel-title" data-i18n="system_log">System Log</div>
        </div>
        <div class="log-list" id="logList">
          <div class="log-entry"><div class="log-time">00:00:00</div><div class="log-msg ok">SYSTEM INITIALIZED</div></div>
          <div class="log-entry"><div class="log-time">00:00:01</div><div class="log-msg info">MODELS LOADED: XCEPTION, EFFICIENTNET</div></div>
          <div class="log-entry"><div class="log-time">00:00:02</div><div class="log-msg ok">AWAITING INPUT...</div></div>
        </div>
      </div>

    </div>
  </div>

  <footer>
    <div class="footer-text">¬© 2026 VERIDEX SYSTEMS ‚Äî NEURAL AUTHENTICITY ENGINE</div>
    <div class="tech-tags">
      <div class="tech-tag">TENSORFLOW</div>
      <div class="tech-tag">PYTORCH</div>
      <div class="tech-tag">FLASK</div>
      <div class="tech-tag">REACT</div>
      <div class="tech-tag">AWS</div>
    </div>
  </footer>
</div>

<!-- SHARE MODAL -->
<div class="modal-overlay" id="shareModal">
  <div class="modal">
    <button class="modal-close" onclick="closeShareModal()">‚úï</button>
    <div class="modal-title" data-i18n="share_title">SHARE ANALYSIS RESULT</div>

    <div class="share-result-card" id="shareCard">
      <div class="share-result-row">
        <div class="share-result-label" data-i18n="verdict_label">VERDICT</div>
        <div class="share-result-val" id="shareVerdict">‚Äî</div>
      </div>
      <div class="share-result-row">
        <div class="share-result-label" data-i18n="confidence_label">CONFIDENCE</div>
        <div class="share-result-val" id="shareConf">‚Äî</div>
      </div>
      <div class="share-result-row">
        <div class="share-result-label" data-i18n="analyzed_by">ANALYZED BY</div>
        <div class="share-result-val">VERIDEX v3.7</div>
      </div>
      <div class="share-result-row" style="margin:0;">
        <div class="share-result-label" data-i18n="timestamp">TIMESTAMP</div>
        <div class="share-result-val" id="shareTime">‚Äî</div>
      </div>
    </div>

    <div class="copy-link-row">
      <input class="copy-input" id="shareLinkInput" value="https://veridex-detector.netlify.app" readonly>
      <button class="btn" onclick="copyLink()" style="white-space:nowrap;">
        <span data-i18n="copy_link">COPY LINK</span>
      </button>
    </div>

    <div class="share-buttons">
      <button class="btn" onclick="shareToWhatsApp()" style="flex:1;justify-content:center;">
        üí¨ <span data-i18n="share_wa">WhatsApp</span>
      </button>
      <button class="btn" onclick="shareToTwitter()" style="flex:1;justify-content:center;">
        üê¶ <span data-i18n="share_tw">Twitter / X</span>
      </button>
      <button class="btn" onclick="downloadResult()" style="flex:1;justify-content:center;">
        ‚¨á <span data-i18n="download">Download</span>
      </button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// TRANSLATIONS
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const i18n = {
  en: {
    subtitle: 'Neural Authenticity Engine v3.7', online: 'SYSTEM ONLINE', dark_mode: 'DARK', light_mode: 'LIGHT',
    media_input: 'Media Input', tab_image: 'IMAGE', tab_video: 'VIDEO', tab_batch: 'BATCH',
    drop_media: 'DROP MEDIA FILE', file_types: 'PNG ¬∑ JPG ¬∑ MP4 ¬∑ MOV ¬∑ AVI ¬∑ MAX 500MB',
    select_file: 'SELECT FILE', run_analysis: 'RUN ANALYSIS', reset: 'RESET',
    initializing: 'INITIALIZING MODELS', analysis_results: 'Analysis Results',
    classification: 'CLASSIFICATION VERDICT', deepfake_prob: 'DEEPFAKE PROBABILITY',
    auth_score: 'AUTHENTICITY SCORE', share_result: 'SHARE RESULT',
    awaiting: 'AWAITING INPUT', threat_index: 'Threat Index', risk_assessment: 'OVERALL RISK ASSESSMENT',
    threat: 'THREAT', model_ensemble: 'Model Ensemble', session_stats: 'Session Stats',
    total_scanned: 'TOTAL SCANNED', deepfakes_found: 'DEEPFAKES FOUND', authentic: 'AUTHENTIC',
    avg_conf: 'AVG CONFIDENCE', system_log: 'System Log',
    m_face: 'Facial Consistency', m_freq: 'Frequency Artifacts', m_blink: 'Eye Blink Pattern',
    m_gan: 'GAN Fingerprint', m_skin: 'Skin Texture', m_noise: 'Compression Noise',
    share_title: 'SHARE ANALYSIS RESULT', verdict_label: 'VERDICT', confidence_label: 'CONFIDENCE',
    analyzed_by: 'ANALYZED BY', timestamp: 'TIMESTAMP', copy_link: 'COPY LINK',
    share_wa: 'WhatsApp', share_tw: 'Twitter / X', download: 'Download',
    verdict_fake: 'DEEPFAKE', verdict_real: 'AUTHENTIC',
    copied: 'LINK COPIED!', downloaded: 'RESULT DOWNLOADED!'
  },
  hi: {
    subtitle: '‡§®‡•ç‡§Ø‡•Ç‡§∞‡§≤ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§ø‡§ï‡§§‡§æ ‡§á‡§Ç‡§ú‡§® v3.7', online: '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ë‡§®‡§≤‡§æ‡§á‡§®', dark_mode: '‡§°‡§æ‡§∞‡•ç‡§ï', light_mode: '‡§≤‡§æ‡§á‡§ü',
    media_input: '‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§á‡§®‡§™‡•Å‡§ü', tab_image: '‡§á‡§Æ‡•á‡§ú', tab_video: '‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã', tab_batch: '‡§¨‡•à‡§ö',
    drop_media: '‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§´‡§º‡§æ‡§á‡§≤ ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç', file_types: 'PNG ¬∑ JPG ¬∑ MP4 ¬∑ MOV ¬∑ ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ 500MB',
    select_file: '‡§´‡§º‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç', run_analysis: '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç', reset: '‡§∞‡•Ä‡§∏‡•á‡§ü',
    initializing: '‡§Æ‡•â‡§°‡§≤ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç', analysis_results: '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ',
    classification: '‡§µ‡§∞‡•ç‡§ó‡•Ä‡§ï‡§∞‡§£ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø', deepfake_prob: '‡§°‡•Ä‡§™‡§´‡•á‡§ï ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ',
    auth_score: '‡§™‡•ç‡§∞‡§æ‡§Æ‡§æ‡§£‡§ø‡§ï‡§§‡§æ ‡§∏‡•ç‡§ï‡•ã‡§∞', share_result: '‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç',
    awaiting: '‡§á‡§®‡§™‡•Å‡§ü ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ', threat_index: '‡§ñ‡§§‡§∞‡§æ ‡§∏‡•Ç‡§ö‡§ï‡§æ‡§Ç‡§ï', risk_assessment: '‡§∏‡§Æ‡§ó‡•ç‡§∞ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§®',
    threat: '‡§ñ‡§§‡§∞‡§æ', model_ensemble: '‡§Æ‡•â‡§°‡§≤ ‡§è‡§®‡•ç‡§∏‡•á‡§Æ‡•ç‡§¨‡§≤', session_stats: '‡§∏‡§§‡•ç‡§∞ ‡§Ü‡§Å‡§ï‡§°‡§º‡•á',
    total_scanned: '‡§ï‡•Å‡§≤ ‡§∏‡•ç‡§ï‡•à‡§®', deepfakes_found: '‡§°‡•Ä‡§™‡§´‡•á‡§ï ‡§Æ‡§ø‡§≤‡•á', authentic: '‡§™‡•ç‡§∞‡§æ‡§Æ‡§æ‡§£‡§ø‡§ï',
    avg_conf: '‡§î‡§∏‡§§ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏', system_log: '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§≤‡•â‡§ó',
    m_face: '‡§ö‡•á‡§π‡§∞‡•á ‡§ï‡•Ä ‡§∏‡§Ç‡§ó‡§§‡§ø', m_freq: '‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§ï‡§≤‡§æ‡§ï‡•É‡§§‡§ø‡§Ø‡§æ‡§Å', m_blink: '‡§™‡§≤‡§ï ‡§ù‡§™‡§ï‡§®‡§æ',
    m_gan: 'GAN ‡§´‡§ø‡§Ç‡§ó‡§∞‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü', m_skin: '‡§§‡•ç‡§µ‡§ö‡§æ ‡§¨‡§®‡§æ‡§µ‡§ü', m_noise: '‡§∏‡§Ç‡§™‡•Ä‡§°‡§º‡§® ‡§∂‡•ã‡§∞',
    share_title: '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç', verdict_label: '‡§®‡§ø‡§∞‡•ç‡§£‡§Ø', confidence_label: '‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏',
    analyzed_by: '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ', timestamp: '‡§∏‡§Æ‡§Ø', copy_link: '‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç',
    share_wa: '‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™', share_tw: '‡§ü‡•ç‡§µ‡§ø‡§ü‡§∞ / X', download: '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°',
    verdict_fake: '‡§°‡•Ä‡§™‡§´‡•á‡§ï', verdict_real: '‡§™‡•ç‡§∞‡§æ‡§Æ‡§æ‡§£‡§ø‡§ï',
    copied: '‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•â‡§™‡•Ä ‡§π‡•ã ‡§ó‡§Ø‡§æ!', downloaded: '‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•Å‡§Ü!'
  },
  te: {
    subtitle: '‡∞®‡±ç‡∞Ø‡±Ç‡∞∞‡∞≤‡±ç ‡∞™‡±ç‡∞∞‡∞æ‡∞Æ‡∞æ‡∞£‡∞ø‡∞ï‡∞§ ‡∞á‡∞Ç‡∞ú‡∞ø‡∞®‡±ç v3.7', online: '‡∞∏‡∞ø‡∞∏‡±ç‡∞ü‡∞Æ‡±ç ‡∞Ü‡∞®‡±ç‚Äå‡∞≤‡±à‡∞®‡±ç', dark_mode: '‡∞°‡∞æ‡∞∞‡±ç‡∞ï‡±ç', light_mode: '‡∞≤‡±à‡∞ü‡±ç',
    media_input: '‡∞Æ‡±Ä‡∞°‡∞ø‡∞Ø‡∞æ ‡∞á‡∞®‡±ç‚Äå‡∞™‡±Å‡∞ü‡±ç', tab_image: '‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç', tab_video: '‡∞µ‡±Ä‡∞°‡∞ø‡∞Ø‡±ã', tab_batch: '‡∞¨‡±ç‡∞Ø‡∞æ‡∞ö‡±ç',
    drop_media: '‡∞Æ‡±Ä‡∞°‡∞ø‡∞Ø‡∞æ ‡∞´‡±à‡∞≤‡±ç ‡∞µ‡∞¶‡∞≤‡∞Ç‡∞°‡∞ø', file_types: 'PNG ¬∑ JPG ¬∑ MP4 ¬∑ MOV ¬∑ ‡∞ó‡∞∞‡∞ø‡∞∑‡±ç‡∞ü‡∞Ç 500MB',
    select_file: '‡∞´‡±à‡∞≤‡±ç ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø', run_analysis: '‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£ ‡∞Ö‡∞Æ‡∞≤‡±Å', reset: '‡∞∞‡±Ä‡∞∏‡±Ü‡∞ü‡±ç',
    initializing: '‡∞Æ‡±ã‡∞°‡∞≤‡±ç‡∞∏‡±ç ‡∞≤‡±ã‡∞°‡∞µ‡±Å‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞Ø‡∞ø', analysis_results: '‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£ ‡∞´‡∞≤‡∞ø‡∞§‡∞æ‡∞≤‡±Å',
    classification: '‡∞µ‡∞∞‡±ç‡∞ó‡±Ä‡∞ï‡∞∞‡∞£ ‡∞§‡±Ä‡∞∞‡±ç‡∞™‡±Å', deepfake_prob: '‡∞°‡±Ä‡∞™‡±ç‚Äå‡∞´‡±á‡∞ï‡±ç ‡∞∏‡∞Ç‡∞≠‡∞æ‡∞µ‡±ç‡∞Ø‡∞§',
    auth_score: '‡∞™‡±ç‡∞∞‡∞æ‡∞Æ‡∞æ‡∞£‡∞ø‡∞ï‡∞§ ‡∞∏‡±ç‡∞ï‡±ã‡∞∞‡±Å', share_result: '‡∞´‡∞≤‡∞ø‡∞§‡∞Ç ‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø',
    awaiting: '‡∞á‡∞®‡±ç‚Äå‡∞™‡±Å‡∞ü‡±ç ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞µ‡±á‡∞ö‡∞ø ‡∞â‡∞Ç‡∞¶‡∞ø', threat_index: '‡∞Æ‡±Å‡∞™‡±ç‡∞™‡±Å ‡∞∏‡±Ç‡∞ö‡∞ø‡∞ï', risk_assessment: '‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞∞‡∞ø‡∞∏‡±ç‡∞ï‡±ç ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ',
    threat: '‡∞Æ‡±Å‡∞™‡±ç‡∞™‡±Å', model_ensemble: '‡∞Æ‡±ã‡∞°‡∞≤‡±ç ‡∞é‡∞®‡±ç‡∞∏‡±Ü‡∞Ç‡∞¨‡±Å‡∞≤‡±ç', session_stats: '‡∞∏‡±Ü‡∞∑‡∞®‡±ç ‡∞ó‡∞£‡∞æ‡∞Ç‡∞ï‡∞æ‡∞≤‡±Å',
    total_scanned: '‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞∏‡±ç‡∞ï‡∞æ‡∞®‡±ç', deepfakes_found: '‡∞°‡±Ä‡∞™‡±ç‚Äå‡∞´‡±á‡∞ï‡±ç‚Äå‡∞≤‡±Å ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡∞ø', authentic: '‡∞Ö‡∞∏‡∞≤‡±à‡∞®‡∞µ‡∞ø',
    avg_conf: '‡∞∏‡∞ó‡∞ü‡±Å ‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞∏‡∞Ç', system_log: '‡∞∏‡∞ø‡∞∏‡±ç‡∞ü‡∞Æ‡±ç ‡∞≤‡∞æ‡∞ó‡±ç',
    m_face: '‡∞Æ‡±Å‡∞ñ ‡∞∏‡±ç‡∞•‡∞ø‡∞∞‡∞§‡±ç‡∞µ‡∞Ç', m_freq: '‡∞™‡±å‡∞®‡∞É‡∞™‡±Å‡∞®‡±ç‡∞Ø ‡∞Ö‡∞∞‡±ç‡∞ü‡∞ø‡∞´‡∞æ‡∞ï‡±ç‡∞ü‡±ç‡∞∏‡±ç', m_blink: '‡∞ï‡∞Ç‡∞ü‡∞ø ‡∞∞‡±Ü‡∞™‡±ç‡∞™ ‡∞ï‡∞¶‡∞≤‡∞ø‡∞ï',
    m_gan: 'GAN ‡∞µ‡±á‡∞≤‡∞ø‡∞Æ‡±Å‡∞¶‡±ç‡∞∞', m_skin: '‡∞ö‡∞∞‡±ç‡∞Æ ‡∞Ü‡∞ï‡±É‡∞§‡∞ø', m_noise: '‡∞ï‡∞Ç‡∞™‡±ç‡∞∞‡±Ü‡∞∑‡∞®‡±ç ‡∞®‡∞æ‡∞Ø‡∞ø‡∞∏‡±ç',
    share_title: '‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£ ‡∞´‡∞≤‡∞ø‡∞§‡∞Ç ‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø', verdict_label: '‡∞§‡±Ä‡∞∞‡±ç‡∞™‡±Å', confidence_label: '‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞∏‡∞Ç',
    analyzed_by: '‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞ø‡∞Ç‡∞ö‡∞ø‡∞®‡∞¶‡∞ø', timestamp: '‡∞∏‡∞Æ‡∞Ø‡∞Æ‡±Å‡∞¶‡±ç‡∞∞', copy_link: '‡∞≤‡∞ø‡∞Ç‡∞ï‡±ç ‡∞ï‡∞æ‡∞™‡±Ä',
    share_wa: '‡∞µ‡∞æ‡∞ü‡±ç‡∞∏‡∞æ‡∞™‡±ç', share_tw: '‡∞ü‡±ç‡∞µ‡∞ø‡∞ü‡±ç‡∞ü‡∞∞‡±ç / X', download: '‡∞°‡±å‡∞®‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç',
    verdict_fake: '‡∞°‡±Ä‡∞™‡±ç‚Äå‡∞´‡±á‡∞ï‡±ç', verdict_real: '‡∞Ö‡∞∏‡∞≤‡±à‡∞®‡∞¶‡∞ø',
    copied: '‡∞≤‡∞ø‡∞Ç‡∞ï‡±ç ‡∞ï‡∞æ‡∞™‡±Ä ‡∞Ö‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø!', downloaded: '‡∞´‡∞≤‡∞ø‡∞§‡∞Ç ‡∞°‡±å‡∞®‡±ç‚Äå‡∞≤‡±ã‡∞°‡±à‡∞Ç‡∞¶‡∞ø!'
  },
  ar: {
    subtitle: 'ŸÖÿ≠ÿ±ŸÉ ÿßŸÑŸÖÿµÿßÿØŸÇÿ© ÿßŸÑÿπÿµÿ®Ÿäÿ© v3.7', online: 'ÿßŸÑŸÜÿ∏ÿßŸÖ ŸÖÿ™ÿµŸÑ', dark_mode: 'ÿØÿßŸÉŸÜ', light_mode: 'ŸÅÿßÿ™ÿ≠',
    media_input: 'ÿ•ÿØÿÆÿßŸÑ ÿßŸÑŸàÿ≥ÿßÿ¶ÿ∑', tab_image: 'ÿµŸàÿ±ÿ©', tab_video: 'ŸÅŸäÿØŸäŸà', tab_batch: 'ÿØŸÅÿπÿ©',
    drop_media: 'ÿ£ÿ≥ŸÇÿ∑ ŸÖŸÑŸÅ ÿßŸÑŸàÿ≥ÿßÿ¶ÿ∑ ŸáŸÜÿß', file_types: 'PNG ¬∑ JPG ¬∑ MP4 ¬∑ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ 500MB',
    select_file: 'ÿßÿÆÿ™ÿ± ŸÖŸÑŸÅ', run_analysis: 'ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ', reset: 'ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ',
    initializing: 'ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨', analysis_results: 'ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ',
    classification: 'ÿ≠ŸÉŸÖ ÿßŸÑÿ™ÿµŸÜŸäŸÅ', deepfake_prob: 'ÿßÿ≠ÿ™ŸÖÿßŸÑ ÿßŸÑÿ™ÿ≤ŸàŸäÿ±',
    auth_score: 'ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ£ÿµÿßŸÑÿ©', share_result: 'ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©',
    awaiting: 'ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ•ÿØÿÆÿßŸÑ', threat_index: 'ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ™ŸáÿØŸäÿØ', risk_assessment: 'ÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä',
    threat: 'ÿ™ŸáÿØŸäÿØ', model_ensemble: 'ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨', session_stats: 'ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ¨ŸÑÿ≥ÿ©',
    total_scanned: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ≥ÿ≠', deepfakes_found: 'ŸÖÿ≤ŸäŸÅÿßÿ™ ŸÖŸÉÿ™ÿ¥ŸÅÿ©', authentic: 'ÿ£ÿµŸäŸÑ',
    avg_conf: 'ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿ´ŸÇÿ©', system_log: 'ÿ≥ÿ¨ŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ',
    m_face: 'ÿßÿ™ÿ≥ÿßŸÇ ÿßŸÑŸàÿ¨Ÿá', m_freq: 'ÿ™ÿ¥ŸàŸáÿßÿ™ ÿßŸÑÿ™ÿ±ÿØÿØ', m_blink: 'ŸÜŸÖÿ∑ ÿ±ŸÖÿ¥ ÿßŸÑÿπŸäŸÜ',
    m_gan: 'ÿ®ÿµŸÖÿ© GAN', m_skin: 'ŸÖŸÑŸÖÿ≥ ÿßŸÑÿ¨ŸÑÿØ', m_noise: 'ÿ∂Ÿàÿ∂ÿßÿ° ÿßŸÑÿ∂ÿ∫ÿ∑',
    share_title: 'ŸÖÿ¥ÿßÿ±ŸÉÿ© ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ', verdict_label: 'ÿßŸÑÿ≠ŸÉŸÖ', confidence_label: 'ÿßŸÑÿ´ŸÇÿ©',
    analyzed_by: 'ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿ®Ÿàÿßÿ≥ÿ∑ÿ©', timestamp: 'ÿßŸÑÿ∑ÿßÿ®ÿπ ÿßŸÑÿ≤ŸÖŸÜŸä', copy_link: 'ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑',
    share_wa: 'Ÿàÿßÿ™ÿ≥ÿßÿ®', share_tw: 'ÿ™ŸàŸäÿ™ÿ± / X', download: 'ÿ™ÿ≠ŸÖŸäŸÑ',
    verdict_fake: 'ŸÖÿ≤ŸäŸÅ', verdict_real: 'ÿ£ÿµŸäŸÑ',
    copied: 'ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑!', downloaded: 'ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©!'
  },
  fr: {
    subtitle: 'Moteur d\'Authenticit√© Neurale v3.7', online: 'SYST√àME EN LIGNE', dark_mode: 'SOMBRE', light_mode: 'CLAIR',
    media_input: 'Entr√©e M√©dia', tab_image: 'IMAGE', tab_video: 'VID√âO', tab_batch: 'LOT',
    drop_media: 'D√âPOSER UN FICHIER M√âDIA', file_types: 'PNG ¬∑ JPG ¬∑ MP4 ¬∑ MOV ¬∑ MAX 500MB',
    select_file: 'CHOISIR FICHIER', run_analysis: 'LANCER ANALYSE', reset: 'R√âINITIALISER',
    initializing: 'INITIALISATION DES MOD√àLES', analysis_results: 'R√©sultats d\'Analyse',
    classification: 'VERDICT DE CLASSIFICATION', deepfake_prob: 'PROBABILIT√â DEEPFAKE',
    auth_score: 'SCORE D\'AUTHENTICIT√â', share_result: 'PARTAGER R√âSULTAT',
    awaiting: 'EN ATTENTE D\'ENTR√âE', threat_index: 'Indice de Menace', risk_assessment: '√âVALUATION GLOBALE DU RISQUE',
    threat: 'MENACE', model_ensemble: 'Ensemble de Mod√®les', session_stats: 'Stats de Session',
    total_scanned: 'TOTAL ANALYS√â', deepfakes_found: 'DEEPFAKES TROUV√âS', authentic: 'AUTHENTIQUES',
    avg_conf: 'CONFIANCE MOY.', system_log: 'Journal Syst√®me',
    m_face: 'Coh√©rence Faciale', m_freq: 'Artefacts Fr√©quence', m_blink: 'Motif Clignement',
    m_gan: 'Empreinte GAN', m_skin: 'Texture Peau', m_noise: 'Bruit Compression',
    share_title: 'PARTAGER LE R√âSULTAT', verdict_label: 'VERDICT', confidence_label: 'CONFIANCE',
    analyzed_by: 'ANALYS√â PAR', timestamp: 'HORODATAGE', copy_link: 'COPIER LIEN',
    share_wa: 'WhatsApp', share_tw: 'Twitter / X', download: 'T√©l√©charger',
    verdict_fake: 'DEEPFAKE', verdict_real: 'AUTHENTIQUE',
    copied: 'LIEN COPI√â!', downloaded: 'R√âSULTAT T√âL√âCHARG√â!'
  },
  es: {
    subtitle: 'Motor de Autenticidad Neural v3.7', online: 'SISTEMA EN L√çNEA', dark_mode: 'OSCURO', light_mode: 'CLARO',
    media_input: 'Entrada de Medios', tab_image: 'IMAGEN', tab_video: 'VIDEO', tab_batch: 'LOTE',
    drop_media: 'SOLTAR ARCHIVO MULTIMEDIA', file_types: 'PNG ¬∑ JPG ¬∑ MP4 ¬∑ MOV ¬∑ M√ÅX 500MB',
    select_file: 'ELEGIR ARCHIVO', run_analysis: 'EJECUTAR AN√ÅLISIS', reset: 'REINICIAR',
    initializing: 'INICIALIZANDO MODELOS', analysis_results: 'Resultados de An√°lisis',
    classification: 'VEREDICTO DE CLASIFICACI√ìN', deepfake_prob: 'PROBABILIDAD DEEPFAKE',
    auth_score: 'PUNTUACI√ìN DE AUTENTICIDAD', share_result: 'COMPARTIR RESULTADO',
    awaiting: 'ESPERANDO ENTRADA', threat_index: '√çndice de Amenaza', risk_assessment: 'EVALUACI√ìN GLOBAL DE RIESGO',
    threat: 'AMENAZA', model_ensemble: 'Conjunto de Modelos', session_stats: 'Stats de Sesi√≥n',
    total_scanned: 'TOTAL ANALIZADO', deepfakes_found: 'DEEPFAKES ENCONTRADOS', authentic: 'AUT√âNTICOS',
    avg_conf: 'CONFIANZA PROM.', system_log: 'Registro del Sistema',
    m_face: 'Consistencia Facial', m_freq: 'Artefactos de Frecuencia', m_blink: 'Patr√≥n de Parpadeo',
    m_gan: 'Huella GAN', m_skin: 'Textura de Piel', m_noise: 'Ruido de Compresi√≥n',
    share_title: 'COMPARTIR RESULTADO', verdict_label: 'VEREDICTO', confidence_label: 'CONFIANZA',
    analyzed_by: 'ANALIZADO POR', timestamp: 'MARCA DE TIEMPO', copy_link: 'COPIAR ENLACE',
    share_wa: 'WhatsApp', share_tw: 'Twitter / X', download: 'Descargar',
    verdict_fake: 'DEEPFAKE', verdict_real: 'AUT√âNTICO',
    copied: '¬°ENLACE COPIADO!', downloaded: '¬°RESULTADO DESCARGADO!'
  }
};

let currentLang = 'en';
let currentTheme = 'dark';
let sessionStats = { total: 0, fake: 0, real: 0, confSum: 0 };
let startTime = Date.now();
let lastResult = null;

// ‚îÄ‚îÄ‚îÄ LANGUAGE ‚îÄ‚îÄ‚îÄ
function setLanguage(lang) {
  currentLang = lang;
  const t = i18n[lang];
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (t[key]) el.textContent = t[key];
  });
  document.documentElement.lang = lang;
  // Update verdict if visible
  if (lastResult !== null) {
    const isFake = lastResult;
    document.getElementById('verdictText').textContent = isFake ? t.verdict_fake : t.verdict_real;
    document.getElementById('shareVerdict').textContent = isFake ? t.verdict_fake : t.verdict_real;
  }
}

// ‚îÄ‚îÄ‚îÄ THEME ‚îÄ‚îÄ‚îÄ
function toggleTheme() {
  currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', currentTheme);
  document.getElementById('themeIcon').textContent = currentTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
  const t = i18n[currentLang];
  document.getElementById('themeLabel').textContent = currentTheme === 'dark' ? (t.dark_mode || 'DARK') : (t.light_mode || 'LIGHT');
  addLog(`THEME: ${currentTheme.toUpperCase()}`, 'info');
}

// ‚îÄ‚îÄ‚îÄ LOG ‚îÄ‚îÄ‚îÄ
function getTime() {
  const e = Math.floor((Date.now() - startTime) / 1000);
  return [Math.floor(e/3600), Math.floor((e%3600)/60), e%60].map(n => String(n).padStart(2,'0')).join(':');
}

function addLog(msg, type = 'info') {
  const log = document.getElementById('logList');
  const entry = document.createElement('div');
  entry.className = 'log-entry';
  entry.innerHTML = `<div class="log-time">${getTime()}</div><div class="log-msg ${type}">${msg}</div>`;
  log.appendChild(entry);
  log.scrollTop = log.scrollHeight;
}

// ‚îÄ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ‚îÄ
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

// ‚îÄ‚îÄ‚îÄ TABS ‚îÄ‚îÄ‚îÄ
function switchTab(el, tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
  addLog(`MODE: ${tab.toUpperCase()}`, 'info');
}

// ‚îÄ‚îÄ‚îÄ FILE HANDLING ‚îÄ‚îÄ‚îÄ
function handleFile(input) {
  const file = input.files[0];
  if (!file) return;
  addLog(`FILE: ${file.name.toUpperCase()}`, 'info');
  addLog(`SIZE: ${(file.size/1024/1024).toFixed(2)}MB`, 'info');
  const url = URL.createObjectURL(file);
  const img = document.getElementById('previewImg');
  const vid = document.getElementById('previewVid');
  if (file.type.startsWith('image/')) { img.src = url; img.style.display = ''; vid.style.display = 'none'; }
  else { vid.src = url; vid.style.display = ''; img.style.display = 'none'; }
  document.getElementById('uploadZone').style.display = 'none';
  document.getElementById('previewArea').classList.add('active');
  document.querySelector('.tab-row').style.display = 'none';
  document.getElementById('resultsEmpty').style.display = 'none';
}

// ‚îÄ‚îÄ‚îÄ ANALYSIS ‚îÄ‚îÄ‚îÄ
function startAnalysis() {
  document.getElementById('previewArea').classList.remove('active');
  document.getElementById('analyzingState').classList.add('active');
  addLog('ANALYSIS STARTED', 'warn');
  const steps = [
    [400, 'PREPROCESSING MEDIA', 'Normalizing ¬∑ Resizing'],
    [900, 'RUNNING XCEPTION CNN', 'Inception modules'],
    [1500, 'RUNNING EFFICIENTNET-B7', 'Feature extraction'],
    [2100, 'FREQUENCY DOMAIN ANALYSIS', 'FFT artifacts'],
    [2700, 'FACE FORENSICS++ CHECK', 'Landmark detection'],
    [3200, 'ENSEMBLE AGGREGATION', 'Weighted voting'],
  ];
  steps.forEach(([d, step, sub]) => setTimeout(() => {
    document.getElementById('analyzeStep').textContent = step;
    document.getElementById('analyzeProgress').textContent = sub;
    addLog(step, 'info');
  }, d));
  setTimeout(showResults, 3800);
}

function showResults() {
  document.getElementById('analyzingState').classList.remove('active');
  const isFake = Math.random() > 0.45;
  const fakeConf = isFake ? 70 + Math.random()*28 : 5 + Math.random()*25;
  const realConf = 100 - fakeConf;
  lastResult = isFake;

  sessionStats.total++;
  if (isFake) sessionStats.fake++; else sessionStats.real++;
  sessionStats.confSum += Math.max(fakeConf, realConf);

  const t = i18n[currentLang];
  const vBox = document.getElementById('verdictBox');
  const vText = document.getElementById('verdictText');
  vBox.className = 'verdict-box ' + (isFake ? 'fake' : 'real');
  vText.className = 'verdict-text ' + (isFake ? 'fake' : 'real');
  vText.textContent = isFake ? t.verdict_fake : t.verdict_real;

  setTimeout(() => {
    document.getElementById('fakeFill').style.width = fakeConf.toFixed(1)+'%';
    document.getElementById('realFill').style.width = realConf.toFixed(1)+'%';
    document.getElementById('fakePct').textContent = fakeConf.toFixed(1)+'%';
    document.getElementById('realPct').textContent = realConf.toFixed(1)+'%';
  }, 100);

  const faceOk = !isFake || Math.random() > 0.6;
  const freqOk = !isFake || Math.random() > 0.4;
  const blinkOk = !isFake || Math.random() > 0.5;
  const ganFlag = isFake && Math.random() > 0.3;
  setMetric('m1', faceOk ? 'CONSISTENT' : 'ANOMALOUS', faceOk ? 'safe' : 'danger');
  setMetric('m2', freqOk ? 'CLEAN' : 'ARTIFACTS DETECTED', freqOk ? 'safe' : 'danger');
  setMetric('m3', blinkOk ? 'NATURAL' : 'IRREGULAR', blinkOk ? 'safe' : 'flag');
  setMetric('m4', ganFlag ? 'DETECTED' : 'NOT FOUND', ganFlag ? 'danger' : 'safe');
  setMetric('m5', !isFake ? 'NATURAL' : 'SYNTHETIC', !isFake ? 'safe' : 'danger');
  setMetric('m6', 'NORMAL', 'safe');

  const sc = v => v > 50 ? 'danger' : 'safe';
  ['s1','s2','s3','s4'].forEach((id, i) => {
    const v = Math.max(0, Math.min(100, fakeConf + (Math.random()-0.5)*14));
    document.getElementById(id).textContent = v.toFixed(1)+'%';
    document.getElementById(id).className = 'model-score ' + sc(v);
  });

  const circumference = 314;
  const radial = document.getElementById('radialFill');
  radial.style.strokeDashoffset = circumference;
  const color = fakeConf > 70 ? '#ff003c' : fakeConf > 40 ? '#ffb700' : '#39ff14';
  radial.style.stroke = color;
  setTimeout(() => { radial.style.strokeDashoffset = circumference - (fakeConf/100 * circumference); }, 100);
  document.getElementById('threatPct').textContent = fakeConf.toFixed(0)+'%';
  document.getElementById('threatPct').style.color = color;

  document.getElementById('totalScanned').textContent = sessionStats.total;
  document.getElementById('deepfakesFound').textContent = sessionStats.fake;
  document.getElementById('authenticFound').textContent = sessionStats.real;
  document.getElementById('avgConf').textContent = (sessionStats.confSum/sessionStats.total).toFixed(1)+'%';
  document.getElementById('resultsSection').classList.add('active');

  // Store for share
  document.getElementById('shareVerdict').textContent = isFake ? t.verdict_fake : t.verdict_real;
  document.getElementById('shareConf').textContent = Math.max(fakeConf, realConf).toFixed(1)+'%';
  document.getElementById('shareTime').textContent = new Date().toLocaleString();

  addLog(`VERDICT: ${isFake ? '‚ö† DEEPFAKE' : '‚úì AUTHENTIC'}`, isFake ? 'err' : 'ok');
  addLog(`CONFIDENCE: ${Math.max(fakeConf,realConf).toFixed(1)}%`, 'info');
  addLog('ANALYSIS COMPLETE', 'ok');

  document.getElementById('previewArea').classList.add('active');
  document.getElementById('scanOverlay').classList.remove('active');
}

function setMetric(id, value, cls) {
  const el = document.getElementById(id);
  el.textContent = value;
  el.className = 'metric-value ' + cls;
}

function resetAll() {
  document.getElementById('previewArea').classList.remove('active');
  document.getElementById('uploadZone').style.display = '';
  document.querySelector('.tab-row').style.display = 'flex';
  document.getElementById('analyzingState').classList.remove('active');
  document.getElementById('resultsSection').classList.remove('active');
  document.getElementById('resultsEmpty').style.display = '';
  document.getElementById('fileInput').value = '';
  document.getElementById('previewImg').style.display = 'none';
  document.getElementById('previewVid').style.display = 'none';
  document.getElementById('radialFill').style.strokeDashoffset = '314';
  document.getElementById('threatPct').textContent = '‚Äî';
  lastResult = null;
  addLog('SESSION RESET', 'warn');
}

// ‚îÄ‚îÄ‚îÄ SHARE ‚îÄ‚îÄ‚îÄ
function openShareModal() {
  document.getElementById('shareModal').classList.add('active');
}

function closeShareModal() {
  document.getElementById('shareModal').classList.remove('active');
}

function copyLink() {
  const input = document.getElementById('shareLinkInput');
  navigator.clipboard.writeText(input.value).then(() => {
    showToast(i18n[currentLang].copied || 'LINK COPIED!');
  }).catch(() => {
    input.select(); document.execCommand('copy');
    showToast(i18n[currentLang].copied || 'LINK COPIED!');
  });
}

function shareToWhatsApp() {
  const verdict = document.getElementById('shareVerdict').textContent;
  const conf = document.getElementById('shareConf').textContent;
  const text = `üîç VERIDEX Analysis Result\nVerdict: ${verdict}\nConfidence: ${conf}\nhttps://veridex-detector.netlify.app`;
  window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
}

function shareToTwitter() {
  const verdict = document.getElementById('shareVerdict').textContent;
  const conf = document.getElementById('shareConf').textContent;
  const text = `üîç Analyzed with VERIDEX Deepfake Detector\nVerdict: ${verdict} (${conf} confidence)\nCheck it out:`;
  window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=https://veridex-detector.netlify.app`, '_blank');
}

function downloadResult() {
  const verdict = document.getElementById('shareVerdict').textContent;
  const conf = document.getElementById('shareConf').textContent;
  const time = document.getElementById('shareTime').textContent;
  const content = `VERIDEX ‚Äî Neural Authenticity Engine v3.7\n${'‚îÄ'.repeat(40)}\nVERDICT: ${verdict}\nCONFIDENCE: ${conf}\nANALYZED BY: VERIDEX v3.7\nTIMESTAMP: ${time}\nURL: https://veridex-detector.netlify.app\n${'‚îÄ'.repeat(40)}\nModels: Xception, EfficientNet-B7, FaceForensics++\n`;
  const blob = new Blob([content], {type: 'text/plain'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = `veridex-result-${Date.now()}.txt`;
  a.click();
  showToast(i18n[currentLang].downloaded || 'DOWNLOADED!');
}

// ‚îÄ‚îÄ‚îÄ DRAG DROP ‚îÄ‚îÄ‚îÄ
const zone = document.getElementById('uploadZone');
zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('dragover'); });
zone.addEventListener('dragleave', () => zone.classList.remove('dragover'));
zone.addEventListener('drop', e => {
  e.preventDefault(); zone.classList.remove('dragover');
  const file = e.dataTransfer.files[0];
  if (file) { const dt = new DataTransfer(); dt.items.add(file); document.getElementById('fileInput').files = dt.files; handleFile(document.getElementById('fileInput')); }
});

// Close modal on overlay click
document.getElementById('shareModal').addEventListener('click', function(e) {
  if (e.target === this) closeShareModal();
});
</script>
</body>
</html>
